---
title: "Structures"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Structures}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = "#>"
)

root <- tempfile()
dir.create(root)
knitr::opts_knit$set(
    root.dir = root
)

# Activate crayon
## https://github.com/r-lib/crayon/issues/24
options(crayon.enabled = TRUE)
old_hooks <- fansi::set_knit_hooks(
    knitr::knit_hooks,
    which = c("output", "message", "error")
)
```

`structured` revolves around the concept of strucures, which is a fancy name for project templates. Well, strongly *structured* project templates. So, it is essential to understand those structures to select the most adequate for your project.

Project is a means to an end. Be it analyzing a dataset for a class project or creating a dashboard for a business. `structured` defines projects by a combination of two values. The first is **project level** and determines **how complex** your project will be^[We should always aim for the simplest solution, but sometimes complexity is unavoidable.]. The second is **analysis format** and specifies **how** your project will solve the problem. The next sections give more details about each option those values can assume.

Before we start, it is important to load some packages.

```{r}
# Uncomment to install packages
## install.packages("fs")
## install.packages("remotes")
## remotes::install_github("GiuseppeTT/structured")

# Load packages
library(fs)
library(structured)
```

## Project level
### Basic
The "basic project level" structure is simple, minimal, but complete enough to accomodate all the analysis formats. In other words, a perfect starting point for newbies and an excelent use for quick and simple projects.

Except for the `analysis.R` file^[The `analysis.R` file comes from the "script analysis format", which is the default analysis format value. It is included because `structure_project()` needs both `project_level` and `analysis_format` supplied.], the structure is composed of the following files:

```{r}
structure_project(
    "basic-project",
    project_level = "Basic",
    analysis_format = "Script"
)
dir_tree("basic-project", all = TRUE)
```

The purpose of each file/folder is the following:

- `data/` Save all the pertaining data. For example csv tabular data, the cleaned version of the csv tabular data or even a SQLite database file.

- `output/` Save anything generated that is not data. For instance figures, tables, models, reports, presentation, etc.

- `extra/` Save any file that is not data, output or code but is related to the project. Some cases are professor instructions about the class project and meeting notes.

- `R/` Save auxiliar R files. That is, files that are not run directly but are used by those run files. Some examples are `ui.R` and `sever.R`, which are used by the shiny package.

- `R/functions.R` Write your R functions used in the rest of the project. This helps keeping your code more organized, similar to the effect of adding subfolder such as `data/` to organize your files.

- `basic-project.Rproj` (`<project-directory>.Rproj`) RStudio project file. This [article](https://www.tidyverse.org/blog/2017/12/workflow-vs-script/) from Jenny Brian and this [chapter](https://r4ds.had.co.nz/workflow-projects.html) from R For Data Science book are great reference. In short, this little guy allows you to break free from all the evil that comes from `setwd("obscure/path/that/only/works/in/my/notebook")` and use `read_csv("data/my-data.csv")`.

### Intermediate
If the objective of the "basic project level" structure is getting the job done, the objetive of the "intermediate project level" structure is getting the job done and sharable! Even if it means sharing with yourself in six months, which almost count as another person.

In addition to the files from the previous project level, the "indermediate project level" structure posses a `.gitignore` and a `README.md`.

```{r}
structure_project(
    "intermediate-project",
    project_level = "Intermediate",
    analysis_format = "Script"
)
dir_tree("intermediate-project", all = TRUE)
```

The purpose of each file/folder is the following:

- `README.md`

- `.gitignore`

## Analysis format
### Script
Text.

```{r}
structure_project(
    "script-project",
    project_level = "Basic",
    analysis_format = "Script"
)
dir_tree("script-project", all = TRUE)
```

### R Markdown
Text.

```{r}
structure_project(
    "r-markdown-project",
    project_level = "Basic",
    analysis_format = "R Markdown"
)
dir_tree("r-markdown-project", all = TRUE)
```

### R Markdown (Structured)
Text.

```{r}
structure_project(
    "r-markdown-structured-project",
    project_level = "Basic",
    analysis_format = "R Markdown (Structured)"
)
dir_tree("r-markdown-structured-project", all = TRUE)
```

### Shiny
Text.

```{r}
structure_project(
    "shiny-project",
    project_level = "Basic",
    analysis_format = "Shiny"
)
dir_tree("shiny-project", all = TRUE)
```
